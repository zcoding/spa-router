{"version":3,"file":null,"sources":["../../src/utils.js","../../src/rnode.js","../../src/listener.js","../../src/querystring.js","../../src/tree.js","../../src/main.js"],"sourcesContent":["export function extend() {\n  var obj = {};\n  var srcList = Array.prototype.slice.call(arguments, 0);\n  for (var i = 0, len = srcList.length; i < len; ++i) {\n    var src = srcList[i];\n    for (var q in src) {\n      if (src.hasOwnProperty(q)) {\n        obj[q] = src[q];\n      }\n    }\n  }\n  return obj;\n}\n\nexport function addEvent(name, handler) {\n  if (window.addEventListener) {\n    window.addEventListener(name, handler, false);\n  } else if (window.attachEvent) {\n    window.attachEvent('on' + name, handler);\n  } else {\n    window['on' + name] = handler;\n  }\n}\n\nconst isArray = Array.isArray ? Array.isArray : function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nexport function warn (message) {\n  if (window['console'] && console.warn) {\n    console.warn(message);\n  }\n}\n\nexport { isArray };\n","/**\n * RNode\n * @constructor\n * @param {String} value 必须\n *\n * value:     区分同级节点的唯一标识\n * params:    value包含的参数，使用{参数名:参数规则}键值对表示\n * before:    路由匹配时，url改变之前执行的回调函数或队列\n * callbacks: 路由匹配时执行的回调函数或队列\n * after:     路由匹配时，url改变之后，callbacks执行完再执行的回调函数或队列\n *\n * _children: 子节点引用列表\n * _parent:   父节点引用\n */\n\nexport default class RNode {\n  constructor(value) {\n    var valueType = typeof value;\n    if (valueType !== 'string') {\n      throw new TypeError(`Expected a string in the first argument, got ${ valueType }`);\n    }\n    this.value = value;\n    this.params = {};\n    this.callbacks = null;\n    this.before = null;\n    this.after = null;\n    this._children = [];\n    this._parent = null;\n  }\n\n  /**\n   * set/get children\n   * @param {RNode|[RNode]} children **optional**\n   * @return {[RNode]|RNode} return children node list or this\n   */\n  children(children) {\n    if (undefined === children) {\n      return this._children;\n    }\n    if (children instanceof RNode) {\n      this._children.push(children);\n    } else if (isArray(children)) {\n      this._children = this._children.concat(children);\n    } else {\n      throw new TypeError(`Expected RNode or Array in the first argument, got ${ Object.prototype.toString.call(children) }`);\n    }\n    return this;\n  }\n\n  /**\n   * set/get parent\n   * @param {RNode} parent **optional**\n   * @return {RNode} return parent node or this\n   */\n  parent(parent) {\n    if (undefined === parent) {\n      return this._parent;\n    }\n    if (parent instanceof RNode) {\n      this._parent = parent;\n    } else {\n      throw new TypeError(`Expected RNode in the first argument, got ${ Object.prototype.toString.call(parent) }`);\n    }\n    return this;\n  }\n}\n","import { extend, addEvent, warn } from './utils';\n\nconst historySupport = typeof window.history['pushState'] !== \"undefined\";\n\n/// Listener\nconst Listener = {\n  listeners: null,\n\n  history: false,\n\n  setUrlOnly: false,\n\n  init: function(mode) {\n    this.history = mode === 'history';\n    if (this.history) { // IE 10+\n      if (historySupport) {\n        addEvent('popstate', onchange);\n      } else {\n        this.history = false;\n        // warning\n        warn('你的浏览器不支持 History API ，只能使用 hashbang 模式');\n        addEvent('hashchange', onchange);\n      }\n    } else {\n      addEvent('hashchange', onchange);\n    }\n    return this;\n  },\n\n  add: function (fn) {\n    if (!this.listeners) {\n      this.listeners = [];\n    }\n    this.listeners.push(fn);\n    return this;\n  },\n\n  setHashHistory (path) {\n    if (this.history) {\n      history.pushState({}, document.title, path);\n    } else {\n      if (path[0] === '/') {\n        location.hash = '!' + path;\n      } else {\n        var currentURL = location.hash.slice(2); // 去掉前面的#!\n        var idf = currentURL.indexOf('?');\n        if (idf !== -1) {\n          currentURL = currentURL.slice(0, idf);\n        }\n        if (/.*\\/$/.test(currentURL)) {\n          location.hash = '!' + currentURL + path;\n        } else {\n          var hash = currentURL.replace(/([^\\/]+|)$/, function($1) {\n            return $1 === '' ? '/' + path : path;\n          });\n          location.hash = '!' + hash;\n        }\n      }\n    }\n    return this;\n  }\n};\n\nfunction onchange(onChangeEvent) {\n  if (Listener.setUrlOnly) {\n    Listener.setUrlOnly = false;\n    return false;\n  }\n  var listeners = Listener.listeners;\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](onChangeEvent);\n  }\n}\n\nexport default Listener;\n","export default {\n  /**\n   * querystring.stringify\n   * @param { Object } obj\n   * @param { Boolean } traditional [default:false]\n   * @return { String }\n   *\n   * traditional is true:  {x: [1, 2]} => 'x=1&x=2'\n   * traditional is false: {x: [1, 2]} => 'x[]=1&x[]=2'\n   */\n  stringify: function(obj, traditional) {\n    if (!obj) {\n      return '';\n    }\n    var appendString = traditional ? '' : '[]';\n    var names = Object.keys(obj).sort();\n\n    var parts = [];\n    for (var i = 0; i < names.length; ++i) {\n      var name = names[i];\n      var value = obj[name];\n\n      if (Array.isArray(value)) {\n        value.sort();\n        var _parts = [];\n        for (var j = 0; j < value.length; ++j) {\n          _parts.push(`${encodeURIComponent(name).replace(/%20/g, '+')}${appendString}=${encodeURIComponent(value[j]).replace(/%20/g, '+')}`);\n        }\n        parts.push(_parts.join('&'));\n        continue;\n      }\n      parts.push(`${encodeURIComponent(name).replace(/%20/g, '+')}=${encodeURIComponent(value).replace(/%20/g, '+')}`);\n    }\n    return parts.join('&');\n  },\n\n  /**\n   * querystring.parse\n   * @param { String } queryString\n   * @return { Object }\n   * \n   * 'x=1&y=2' => {x: 1, y: 2}\n   * 'x=1&x=2' => {x: 2}\n   */\n  parse: function(queryString) {\n    if (typeof queryString !== 'string') {\n      return {};\n    }\n\n    queryString = queryString.trim().replace(/^(\\?|#)/, '');\n\n    if (queryString === '') {\n      return {};\n    }\n\n    var queryParts = queryString.split('&');\n\n    let query = {};\n\n    for (let i = 0; i < queryParts.length; ++i) {\n      var parts = queryParts[i].replace(/\\+/g, '%20').split('='); // 特殊字符`+`转换为空格\n      var name = parts[0], value = parts[1];\n\n      name = decodeURIComponent(name);\n\n      value = value === undefined ? null : decodeURIComponent(value);\n\n      if (!query.hasOwnProperty(name)) {\n        query[name] = value;\n      } else if (Array.isArray(query[name])) {\n        query[name].push(value);\n      } else {\n        query[name] = [query[name], value];\n      }\n    }\n    return query;\n  }\n};\n","import RNode from './rnode';\n\n// TODO: root怎么处理？\nexport function handler(onChangeEvent) {\n  let mode = this.options.mode;\n  let url;\n  switch(mode) {\n    case 'history':\n      url = location.pathname + location.search + location.hash;\n      if (url.substr(0, 1) !== '/') {\n        url = '/' + url;\n      }\n      break;\n    case 'hashbang':\n    default:\n      var hash = location.hash.slice(1);\n      if (hash === '' || hash === '!') {\n        return this.redirect(this.options.root);\n      }\n      var newURL = onChangeEvent && onChangeEvent.newURL || location.hash;\n      url = newURL.replace(/.*#!/, '');\n  }\n  this.dispatch(url.charAt(0) === '/' ? url : '/' + url);\n}\n\n/**\n * 根据给定的path，查找路由树，返回path对应的节点。如果节点不存在就创建新的节点\n * 匹配参数（参数名由字母、数字、下划线组成，不能以数字开头。后面带括号的是特定参数的匹配规则。）\n * @param {RNode} tree\n * @param {String} path\n * @param {Boolean} onlyFind 只找节点，当节点不存在时不要创建新节点\n * @return {RNode}\n * */\nexport function findNode(tree, path, onlyFind) {\n  onlyFind = !!onlyFind;\n  var parts = path.split('/');\n  var target = null, found = false;\n  var parent = tree;\n  var params;\n  for (var i = 0, len = parts.length; i < len; ++i) {\n    params = false;\n    var realCurrentValue = parts[i];\n\n    var matcher = /:([a-zA-Z_][a-zA-Z0-9_]*)(\\([^\\)]+\\))?/g;\n\n    var k = 0;\n\n    /* jshint ignore:start */\n    realCurrentValue = realCurrentValue.replace(matcher, function($1, $2, $3) {\n      params = params || [];\n      params[k++] = $2;\n      if (!$3) { // In IE 8 , $3 is an empty String while in other browser it is undefined.\n        return '([a-zA-Z0-9_]+)';\n      } else {\n        return $3;\n      }\n    });\n    /* jshint ignore:end */\n\n    for (var j = 0; j < parent._children.length; ++j ) {\n      if (parent._children[j].value === realCurrentValue) {\n        target = parent._children[j];\n        found = true;\n        break;\n      }\n    }\n    if (!found) { // 不存在，创建新节点\n      if (onlyFind) return false;\n      var extendNode = new RNode(realCurrentValue);\n      parent.children(extendNode);\n      extendNode.parent(parent);\n      extendNode.params = params;\n      target = extendNode;\n    }\n    parent = target;\n    found = false;\n  }\n  return target;\n}\n\nexport function removeRNode (rnode) {\n  const _parent = rnode._parent;\n  if (_parent) {\n    for (let i = 0; i < _parent._children.length; ++i) {\n      if (_parent._children[i] === rnode) {\n        _parent._children.splice(i, 0);\n        break;\n      }\n    }\n  }\n  return rnode;\n}\n\n/**\n * 构造路由树/子树\n * @param {RNode} root 当前根节点\n * @param {Object} routes 当前节点的路由表\n * @return {RNode} 返回根节点\n * */\nexport function createRouteTree(root, routes) {\n\n  if (typeof routes === 'function') {\n    root.callbacks = [routes];\n    return root;\n  } else if (Array.isArray(routes)) {\n    root.callbacks = routes;\n    return root;\n  }\n\n  for (var path in routes) {\n    if (routes.hasOwnProperty(path)) {\n      // @TODO 如何实现 beforeLeave\n      var fns = routes[path];\n\n      if (path === '/') {\n        createRouteTree(root, fns);\n      } else {\n        if (path !== '' && path[0] === '/') {\n          path = path.slice(1);\n        }\n        createRouteTree(findNode(root, path), fns);\n      }\n\n    }\n  }\n\n  return root;\n}\n\n/**\n * @param {RNode} root 当前节点\n * @param {Array} parts 路径分段数组\n * @param {Integer} ci 当前路径分段索引\n * @param {Integer} ri 当前节点所在兄弟节点列表的位置\n * @params {Object} params 记录参数的对象\n * @return {[RNode, Object]} 同时返回节点和参数\n */\nexport function dfs(root, parts, ci, ri, params) {\n\n  var value = parts[ci];\n\n  var newParams = {};\n  for (var p in params) { // copy: params => newParams\n    if (params.hasOwnProperty(p)) {\n      newParams[p] = params[p];\n    }\n  }\n\n  var parent = root.parent();\n\n  if (parent === null && ri > 0) { // finally not matched\n    return [false, newParams];\n  }\n\n  if (parent !== null && ri > parent._children.length-1) { // not matched, go back\n    return [false, newParams];\n  }\n\n  if (ci > parts.length-1 || ci < 0) return [false, newParams];\n\n  var matcher = new RegExp('^' + root.value + '$');\n  var matches = value.match(matcher);\n\n  if (matches === null) return [false, newParams]; // not matched, go back\n\n  if (!!root.params) {\n    matches = [].slice.apply(matches, [1]);\n    for (var k = 0; k < matches.length; ++k) {\n      newParams[root.params[k]] = matches[k];\n    }\n  }\n\n  if (ci === parts.length-1 && root.callbacks !== null) { // finally matched\n    return [root, newParams];\n  }\n\n  for (var i = 0; i < root._children.length; ++i) {\n    var found = dfs(root._children[i], parts, ci+1, i, newParams); // matched, go ahead\n    if (!found[0]) continue;\n    return found;\n  }\n\n  return dfs(root, parts, ci, ri+1, params); // not matched, go back\n}\n\n/**\n * 搜索路由树，看是否存在匹配的路径，如果存在，返回相应的回调函数\n * @todo 只返回第一个匹配到的路由（如果存在多个匹配？）\n * @param {RNode} tree 树根\n * @param {String} path 要匹配的路径\n * 返回值包含两个，用数组表示[callbacks, params]\n * @return {Function|Array|null} 如果存在就返回相应的回调，否则返回null\n * @return {[Array, Object]} 同时返回回调和参数\n *\n * */\nexport function searchRouteTree(tree, path) {\n\n  var found = dfs(tree, path.split('/'), 0, 0, {});\n\n  if (!found[0]) {\n    return [null, {}];\n  }\n\n  return [found[0].callbacks, found[1]];\n}\n","import { extend, addEvent, isArray } from './utils';\nimport RNode from './rnode';\nimport Listener from './listener';\nimport querystring from './querystring';\nimport { handler, findNode, createRouteTree, searchRouteTree } from './tree';\n\nconst optionDefaults = {\n  // mode可以是history|hashbang\n  // mode:history     使用HTML5 History API\n  // mode:hashbang    使用hash（hashbang模式）\n  root: '/', // TODO\n  mode: 'hashbang',\n  notFound: false,\n  recurse: false // TODO\n};\n\n/**\n * Router (routes)\n * @constructor\n * @param {Object} routes **Optional**\n */\n\nexport default function Router(routes) {\n  routes = routes || {};\n  const root = new RNode('');\n  root.params = false;\n  this.routeTree = createRouteTree(root, routes);\n  this.options = {};\n  this._hooks = {};\n  this.configure(optionDefaults);\n}\n\nvar proto = Router.prototype;\n\n/**\n * .configure()\n * @method\n * @param {Object} options **Optional**\n * @return this\n */\nproto.configure = function(options) {\n  options = options || {};\n  this.options = extend(this.options, options);\n  return this;\n};\n\n/**\n * .start()\n * @method\n * @param {Object} options\n * @return this\n */\nproto.start = function(options) {\n  options = options || {};\n  this._hooks['beforeEach'] = options.beforeEach ? [options.beforeEach] : [];\n  this._hooks['afterEach'] = options.afterEach ? [options.afterEach] : [];\n  // 初始化配置\n  this.configure(options);\n  Listener.init(this.options.mode).add(() => {\n    return handler.call(this);\n  });\n  // 首次触发\n  handler.call(this);\n  return this;\n};\n\n// 停止路由监听\nproto.stop = function() {\n  Listener.stop();\n  return this;\n};\n\n  /**\n   * .mount() 将路由挂载到某个节点上\n   * @method\n   * @param {String} path\n   * @param {Object} routes\n   * @return this\n   */\nproto.mount = function(path, routes) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  createRouteTree(findNode(this.routeTree, path), routes);\n  return this;\n};\n\n/**\n * .on()\n * @method\n * @param {String|RegExp} path\n * @param {Function|Array} handlers\n * @return this\n */\nproto.on = function(path, handlers) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  var n = findNode(this.routeTree, path);\n  n.callbacks = n.callbacks || [];\n  if (Array.isArray(handlers)) {\n    n.callbacks = n.callbacks.concat(handlers);\n  } else if (typeof handlers === 'function') {\n    n.callbacks.push(handlers);\n  }\n  return this;\n};\n\n/**\n * .dispatch() 根据给定的路径，遍历路由树，只要找到一个匹配的就把路由返回\n * @method\n * @param {String} path\n * @return this\n */\nproto.dispatch = function(path) {\n  var routeTree = this.routeTree;\n  // 保存原始请求uri\n  var uri = path;\n  // 取出query部分\n  var queryIndex = path.indexOf('?');\n  var hashIndex = path.indexOf('#');\n  hashIndex = hashIndex === -1 ? path.length : hashIndex;\n  var queryString = queryIndex === -1 ? '' : path.slice(queryIndex+1, hashIndex);\n  path = queryIndex === -1 ? path : path.slice(0, queryIndex);\n  var req = {uri: uri, path: path, query: querystring.parse(queryString), $router: this};\n\n  if (path === '/') {\n    path = '';\n  }\n  var result = searchRouteTree(routeTree, path);\n  var callbacks = result[0];\n  req.params = result[1];\n  this._callHooks('beforeEach', req);\n  if (callbacks !== null) {\n    if (Array.isArray(callbacks)) {\n      let _cbs = callbacks.slice(0); // 复制一个，避免中间调用了 off 导致 length 变化\n      for (let i = 0; i < _cbs.length; ++i) { // 不考虑异步操作\n        var pre = _cbs[i].call(this, req); // @TODO 可以中断 callback 的调用\n        if (typeof pre === 'boolean' && !pre) { // 如果前一个 callback 返回了 false ，就不执行后面的 callback\n          break;\n        }\n      }\n    } else {\n      throw new TypeError(`Expected Array, got ${ typeof callbacks }`);\n    }\n  } else if (this.options.notFound) {\n    this.options.notFound(req);\n  }\n  this._callHooks('afterEach', req);\n  return this;\n};\n\n/**\n * 这个方法会改变当前的`url`，从而触发路由（和dispatch类似，但是dispatch不会改动`url`）\n * 这个方法对于hash/hashbang模式没有多大用处，用户可以通过点击<a>标签实现`url`改变而不跳转页面，但是在history模式下，用户无法通过标签改变`url`而不跳转页面\n * 改方法相当于调用一次history.pushState()然后再调用.dispatch()\n * 如果url没有改变，则不\"刷新\"\n *\n * @param {String} path\n * @return this\n */\nproto.setRoute = function(path) {\n  var loc = window.location;\n  var oldURI = loc.pathname + loc.search;\n  Listener.setHashHistory(path);\n  var newURI = loc.pathname + loc.search;\n  if (this.options.mode === 'history' && oldURI !== newURI) {\n    this.dispatch(newURI);\n  }\n  return this;\n};\n\n/**\n * 这个方法会改变当前的 `url` 但是不触发路由\n */\nproto.setUrl = function (path) {\n  Listener.setUrlOnly = true;\n  Listener.setHashHistory(path);\n  return this;\n};\n\n/**\n * alias: `setRoute`\n */\nproto.redirect = function(path) {\n  return this.setRoute(path);\n};\n\n/**\n * .once(path, handlers)\n * 和.on()方法类似，但只会触发一次\n * @param {String|RegExp} path\n * @param {Function|Array} handlers\n * @return this\n */\nproto.once = function(path, handlers) {\n  const _this = this;\n  function onlyOnce (req) {\n    for (let i = 0; i < handlers.length; ++i) {\n      handlers[i].call(_this, req);\n    }\n    _this.off(path, onlyOnce);\n  }\n  return this.on(path, onlyOnce);\n};\n\n/**\n * .off() 方法表示不再侦听某个路由的某个 cb\n * 如果没有指定 cb 则直接将该路由节点的所有 callbacks 移除并设置为 null\n * 如果 callbacks 已经全部移除，则设置为 null\n * @return this\n */\nproto.off = function(path, cb) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  var n = findNode(this.routeTree, path, true);\n  if (n && n.callbacks) {\n    if (cb) {\n      for (let i = 0; i < n.callbacks.length; ++i) {\n        if (n.callbacks[i] === cb) {\n          n.callbacks.splice(i, 1);\n          break;\n        }\n      }\n    } else {\n      n.callbacks.splice(0, n.callbacks.length);\n    }\n    if (n.callbacks.length === 0) {\n      n.callbacks = null;\n    }\n  }\n  return this;\n};\n\n/**\n * .reload()\n * reload page: redispatch current path\n * @method\n * @return this\n */\nproto.reload = function() {\n  if (this.options.mode === 'history') {\n    this.dispatch(location.pathname + location.search + location.hash);\n  } else if (this.options.mode === 'hashbang') {\n    this.dispatch(location.hash.slice(2));\n  } else {\n    this.dispatch(location.hash.slice(1));\n  }\n  return this;\n};\n\nproto._callHooks = function(hookName, req) {\n  var callbacks = this._hooks[hookName] || [];\n  for (let i = 0; i < callbacks.length; ++i) {\n    callbacks[i].call(this, req);\n  }\n};\n"],"names":["extend","obj","srcList","Array","prototype","slice","call","arguments","i","len","length","src","q","hasOwnProperty","addEvent","name","handler","window","addEventListener","attachEvent","isArray","warn","message","console","RNode","value","valueType","TypeError","params","callbacks","before","after","_children","_parent","children","undefined","push","concat","Object","toString","parent","historySupport","history","Listener","mode","onchange","fn","listeners","path","pushState","document","title","hash","currentURL","location","idf","indexOf","test","replace","$1","onChangeEvent","setUrlOnly","l","traditional","appendString","names","keys","sort","parts","_parts","j","encodeURIComponent","join","queryString","trim","queryParts","split","query","decodeURIComponent","options","url","pathname","search","substr","redirect","root","newURL","dispatch","charAt","findNode","tree","onlyFind","target","found","realCurrentValue","matcher","k","$2","$3","extendNode","createRouteTree","routes","fns","dfs","ci","ri","newParams","p","RegExp","matches","match","apply","searchRouteTree","optionDefaults","Router","routeTree","_hooks","configure","proto","start","beforeEach","afterEach","init","add","stop","mount","on","handlers","n","uri","queryIndex","hashIndex","req","querystring","parse","$router","result","_callHooks","_cbs","pre","notFound","setRoute","loc","oldURI","setHashHistory","newURI","setUrl","once","_this","onlyOnce","off","cb","splice","reload","hookName"],"mappings":"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"}