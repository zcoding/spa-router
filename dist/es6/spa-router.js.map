{"version":3,"file":"spa-router.js","sources":["../../src/utils.js","../../src/rnode.js","../../src/listener.js","../../src/querystring.js","../../src/tree.js","../../src/main.js"],"sourcesContent":["export function extend() {\n  var obj = {};\n  var srcList = Array.prototype.slice.call(arguments, 0);\n  for (var i = 0, len = srcList.length; i < len; ++i) {\n    var src = srcList[i];\n    for (var q in src) {\n      if (src.hasOwnProperty(q)) {\n        obj[q] = src[q];\n      }\n    }\n  }\n  return obj;\n}\n\nexport function addEvent(name, handler) {\n  if (window.addEventListener) {\n    window.addEventListener(name, handler, false);\n  } else if (window.attachEvent) {\n    window.attachEvent('on' + name, handler);\n  } else {\n    window['on' + name] = handler;\n  }\n}\n\nconst isArray = Array.isArray ? Array.isArray : function(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nexport { isArray };\n","/**\n * RNode\n * @constructor\n * @param {String} value 必须\n *\n * value:     区分同级节点的唯一标识\n * params:    value包含的参数，使用{参数名:参数规则}键值对表示\n * before:    路由匹配时，url改变之前执行的回调函数或队列\n * callbacks: 路由匹配时执行的回调函数或队列\n * after:     路由匹配时，url改变之后，callbacks执行完再执行的回调函数或队列\n *\n * _children: 子节点引用列表\n * _parent:   父节点引用\n */\n\nexport default class RNode {\n  constructor(value) {\n    var valueType = typeof value;\n    if (valueType !== 'string') {\n      throw new TypeError(`Expected a string in the first argument, got ${ valueType }`);\n    }\n    this.value = value;\n    this.params = {};\n    this.callbacks = null;\n    this.before = null;\n    this.after = null;\n    this._children = [];\n    this._parent = null;\n  }\n\n  /**\n   * set/get children\n   * @param {RNode|[RNode]} children **optional**\n   * @return {[RNode]|RNode} return children node list or this\n   */\n  children(children) {\n    if (undefined === children) {\n      return this._children;\n    }\n    if (children instanceof RNode) {\n      this._children.push(children);\n    } else if (isArray(children)) {\n      this._children = this._children.concat(children);\n    } else {\n      throw new TypeError(`Expected RNode or Array in the first argument, got ${ Object.prototype.toString.call(children) }`);\n    }\n    return this;\n  }\n\n  /**\n   * set/get parent\n   * @param {RNode} parent **optional**\n   * @return {RNode} return parent node or this\n   */\n  parent(parent) {\n    if (undefined === parent) {\n      return this._parent;\n    }\n    if (parent instanceof RNode) {\n      this._parent = parent;\n    } else {\n      throw new TypeError(`Expected RNode in the first argument, got ${ Object.prototype.toString.call(parent) }`);\n    }\n    return this;\n  }\n}\n","import { extend, addEvent } from './utils';\n\nvar historySupport = typeof window.history['pushState'] !== \"undefined\";\n\n/// Listener\nvar Listener = {\n  listeners: null,\n\n  history: false,\n\n  init: function(mode) {\n    this.history = mode === 'history';\n    if (this.history && historySupport) { // IE 10+\n      addEvent('popstate', onchange);\n    } else {\n      addEvent('hashchange', onchange);\n    }\n    return this;\n  },\n\n  add: function (fn) {\n    if (!this.listeners) {\n      this.listeners = [];\n    }\n    this.listeners.push(fn);\n    return this;\n  },\n\n  setHashHistory: function (path) {\n    if (this.history) {\n      history.pushState({}, document.title, path);\n    } else {\n      if (path[0] === '/') {\n        location.hash = '!' + path;\n      } else {\n        var currentURL = location.hash.slice(2); // 去掉前面的#!\n        var idf = currentURL.indexOf('?');\n        if (idf !== -1) {\n          currentURL = currentURL.slice(0, idf);\n        }\n        if (/.*\\/$/.test(currentURL)) {\n          location.hash = '!' + currentURL + path;\n        } else {\n          var hash = currentURL.replace(/([^\\/]+|)$/, function($1) {\n            return $1 === '' ? '/' + path : path;\n          });\n          location.hash = '!' + hash;\n        }\n      }\n    }\n    return this;\n  }\n};\n\nfunction onchange(onChangeEvent) {\n  var listeners = Listener.listeners;\n  for (var i = 0, l = listeners.length; i < l; i++) {\n    listeners[i](onChangeEvent);\n  }\n}\n\nexport default Listener;\n","export default {\n  /**\n   * querystring.stringify\n   * @param { Object } obj\n   * @param { Boolean } traditional [default:false]\n   * @return { String }\n   *\n   * traditional is true:  {x: [1, 2]} => 'x=1&x=2'\n   * traditional is false: {x: [1, 2]} => 'x[]=1&x[]=2'\n   */\n  stringify: function(obj, traditional) {\n    if (!obj) {\n      return '';\n    }\n    var appendString = traditional ? '' : '[]';\n    var names = Object.keys(obj).sort();\n\n    var parts = [];\n    for (var i = 0; i < names.length; ++i) {\n      var name = names[i];\n      var value = obj[name];\n\n      if (Array.isArray(value)) {\n        value.sort();\n        var _parts = [];\n        for (var j = 0; j < value.length; ++j) {\n          _parts.push(`${encodeURIComponent(name).replace(/%20/g, '+')}${appendString}=${encodeURIComponent(value[j]).replace(/%20/g, '+')}`);\n        }\n        parts.push(_parts.join('&'));\n        continue;\n      }\n      parts.push(`${encodeURIComponent(name).replace(/%20/g, '+')}=${encodeURIComponent(value).replace(/%20/g, '+')}`);\n    }\n    return parts.join('&');\n  },\n\n  /**\n   * querystring.parse\n   * @param { String } queryString\n   * @return { Object }\n   * \n   * 'x=1&y=2' => {x: 1, y: 2}\n   * 'x=1&x=2' => {x: 2}\n   */\n  parse: function(queryString) {\n    if (typeof queryString !== 'string') {\n      return {};\n    }\n\n    queryString = queryString.trim().replace(/^(\\?|#)/, '');\n\n    if (queryString === '') {\n      return {};\n    }\n\n    var queryParts = queryString.split('&');\n\n    let query = {};\n\n    for (let i = 0; i < queryParts.length; ++i) {\n      var parts = queryParts[i].replace(/\\+/g, '%20').split('='); // 特殊字符`+`转换为空格\n      var name = parts[0], value = parts[1];\n\n      name = decodeURIComponent(name);\n\n      value = value === undefined ? null : decodeURIComponent(value);\n\n      if (!query.hasOwnProperty(name)) {\n        query[name] = value;\n      } else if (Array.isArray(query[name])) {\n        query[name].push(value);\n      } else {\n        query[name] = [query[name], value];\n      }\n    }\n    return query;\n  }\n};\n","import RNode from './rnode';\n\n// TODO: root怎么处理？\nexport function handler(onChangeEvent) {\n  let mode = this.options.mode;\n  let url;\n  switch(mode) {\n    case 'history':\n      url = location.pathname + location.search + location.hash;\n      if (url.substr(0, 1) !== '/') {\n        url = '/' + url;\n      }\n      break;\n    case 'hashbang':\n    default:\n      var hash = location.hash.slice(1);\n      if (hash === '' || hash === '!') {\n        return this.redirect(this.options.root);\n      }\n      var newURL = onChangeEvent && onChangeEvent.newURL || location.hash;\n      url = newURL.replace(/.*#!/, '');\n  }\n  this.dispatch(url.charAt(0) === '/' ? url : '/' + url);\n}\n\n/**\n * 根据给定的path，查找路由树，返回path对应的节点。如果节点不存在就创建新的节点\n * 匹配参数（参数名由字母、数字、下划线组成，不能以数字开头。后面带括号的是特定参数的匹配规则。）\n * @param {RNode} tree\n * @param {String} path\n * @param {Boolean} onlyFind 只找节点，当节点不存在时不要创建新节点\n * @return {RNode}\n * */\nexport function findNode(tree, path, onlyFind) {\n  onlyFind = !!onlyFind;\n  var parts = path.split('/');\n  var target = null, found = false;\n  var parent = tree;\n  var params;\n  for (var i = 0, len = parts.length; i < len; ++i) {\n    params = false;\n    var realCurrentValue = parts[i];\n\n    var matcher = /:([a-zA-Z_][a-zA-Z0-9_]*)(\\([^\\)]+\\))?/g;\n\n    var k = 0;\n\n    /* jshint ignore:start */\n    realCurrentValue = realCurrentValue.replace(matcher, function($1, $2, $3) {\n      params = params || [];\n      params[k++] = $2;\n      if (typeof $3 === 'undefined') {\n        return '([a-zA-Z0-9_]+)';\n      } else {\n        return $3;\n      }\n    });\n    /* jshint ignore:end */\n\n    for (var j = 0; j < parent._children.length; ++j ) {\n      if (parent._children[j].value === realCurrentValue) {\n        target = parent._children[j];\n        found = true;\n        break;\n      }\n    }\n    if (!found) { // 不存在，创建新节点\n      if (onlyFind) return false;\n      var extendNode = new RNode(realCurrentValue);\n      parent.children(extendNode);\n      extendNode.parent(parent);\n      extendNode.params = params;\n      target = extendNode;\n    }\n    parent = target;\n    found = false;\n  }\n  return target;\n}\n\n/**\n * 构造路由树/子树\n * @param {RNode} root 当前根节点\n * @param {Object} routes 当前节点的路由表\n * @return {RNode} 返回根节点\n * */\nexport function createRouteTree(root, routes) {\n\n  if (typeof routes === 'function') {\n    root.callbacks = [routes];\n    return root;\n  } else if (Array.isArray(routes)) {\n    root.callbacks = routes;\n    return root;\n  }\n\n  for (var path in routes) {\n    if (routes.hasOwnProperty(path)) {\n\n      var fns = routes[path];\n\n      if (path === '/') {\n        createRouteTree(root, fns);\n      } else {\n        if (path !== '' && path[0] === '/') {\n          path = path.slice(1);\n        }\n        createRouteTree(findNode(root, path), fns);\n      }\n\n    }\n  }\n\n  return root;\n}\n\n/**\n * @param {RNode} root 当前节点\n * @param {Array} parts 路径分段数组\n * @param {Integer} ci 当前路径分段索引\n * @param {Integer} ri 当前节点所在兄弟节点列表的位置\n * @params {Object} params 记录参数的对象\n * @return {[RNode, Object]} 同时返回节点和参数\n */\nexport function dfs(root, parts, ci, ri, params) {\n\n  var value = parts[ci];\n\n  var newParams = {};\n  for (var p in params) { // copy: params => newParams\n    if (params.hasOwnProperty(p)) {\n      newParams[p] = params[p];\n    }\n  }\n\n  var parent = root.parent();\n\n  if (parent === null && ri > 0) { // finally not matched\n    return [false, newParams];\n  }\n\n  if (parent !== null && ri > parent._children.length-1) { // not matched, go back\n    return [false, newParams];\n  }\n\n  if (ci > parts.length-1 || ci < 0) return [false, newParams];\n\n  var matcher = new RegExp('^' + root.value + '$');\n  var matches = value.match(matcher);\n\n  if (matches === null) return [false, newParams]; // not matched, go back\n\n  if (!!root.params) {\n    matches = [].slice.apply(matches, [1]);\n    for (var k = 0; k < matches.length; ++k) {\n      newParams[root.params[k]] = matches[k];\n    }\n  }\n\n  if (ci === parts.length-1 && root.callbacks !== null) { // finally matched\n    return [root, newParams];\n  }\n\n  for (var i = 0; i < root._children.length; ++i) {\n    var found = dfs(root._children[i], parts, ci+1, i, newParams); // matched, go ahead\n    if (!found[0]) continue;\n    return found;\n  }\n\n  return dfs(root, parts, ci, ri+1, params); // not matched, go back\n}\n\n/**\n * 搜索路由树，看是否存在匹配的路径，如果存在，返回相应的回调函数\n * @todo 只返回第一个匹配到的路由（如果存在多个匹配？）\n * @param {RNode} tree 树根\n * @param {String} path 要匹配的路径\n * 返回值包含两个，用数组表示[callbacks, params]\n * @return {Function|Array|null} 如果存在就返回相应的回调，否则返回null\n * @return {[Array, Object]} 同时返回回调和参数\n *\n * */\nexport function searchRouteTree(tree, path) {\n\n  var found = dfs(tree, path.split('/'), 0, 0, {});\n\n  if (!found[0]) {\n    return [null, {}];\n  }\n\n  return [found[0].callbacks, found[1]];\n}\n","import { extend, addEvent, isArray } from './utils';\nimport RNode from './rnode';\nimport Listener from './listener';\nimport querystring from './querystring';\nimport { handler, findNode, createRouteTree, dfs, searchRouteTree } from './tree';\n\nconst optionDefaults = {\n  // mode可以是history|hashbang\n  // mode:history     使用HTML5 History API\n  // mode:hashbang    使用hash（hashbang模式）\n  root: '/', // TODO\n  mode: 'hashbang',\n  notFound: false,\n  recurse: false // TODO\n};\n\n/**\n * Router (routes)\n * @constructor\n * @param {Object} routes **Optional**\n */\n\nexport default function Router(routes) {\n  routes = routes || {};\n  var root = new RNode('');\n  root.params = false;\n  this.routeTree = createRouteTree(root, routes);\n  this.options = {};\n  this.hooks = {\n    \"beforeEach\": [],\n    \"afterEach\": []\n  };\n  this.configure(optionDefaults);\n}\n\nvar proto = Router.prototype;\n\n/**\n * .configure()\n * @method\n * @param {Object} options **Optional**\n * @return this\n */\nproto.configure = function(options) {\n  options = options || {};\n  this.options = extend(this.options, options);\n  return this;\n};\n\n/**\n * .start()\n * @method\n * @param {Object} options\n * @return this\n */\nproto.start = function(options) {\n  options = options || {};\n  var self = this;\n  // 初始化配置\n  this.configure(options);\n  Listener.init(this.options.mode).add(function() {\n    return handler.call(self);\n  });\n  // 首次触发\n  handler.call(this);\n  return this;\n};\n\n// 停止路由监听\nproto.stop = function() {\n  Listener.stop();\n  return this;\n};\n\n  /**\n   * .mount() 将路由挂载到某个节点上\n   * @method\n   * @param {String} path\n   * @param {Object} routes\n   * @return this\n   */\nproto.mount = function(path, routes) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  createRouteTree(findNode(this.routeTree, path), routes);\n  return this;\n};\n\n/**\n * .on()\n * @method\n * @param {String|RegExp} path\n * @param {Function|Array} handlers\n * @return this\n */\nproto.on = function(path, handlers) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  var n = findNode(this.routeTree, path);\n  n.callbacks = n.callbacks || [];\n  if (Array.isArray(handlers)) {\n    n.callbacks = n.callbacks.concat(handlers);\n  } else if (typeof handlers === 'function') {\n    n.callbacks.push(handlers);\n  }\n  return this;\n};\n\n/**\n * .dispatch() 根据给定的路径，遍历路由树，只要找到一个匹配的就把路由返回\n * @method\n * @param {String} path\n * @return this\n */\nproto.dispatch = function(path) {\n  var routeTree = this.routeTree;\n  // 保存原始请求uri\n  var uri = path;\n  // 取出query部分\n  var queryIndex = path.indexOf('?');\n  var hashIndex = path.indexOf('#');\n  hashIndex = hashIndex === -1 ? path.length : hashIndex;\n  var queryString = queryIndex === -1 ? '' : path.slice(queryIndex+1, hashIndex);\n  path = queryIndex === -1 ? path : path.slice(0, queryIndex);\n  var req = {uri: uri, path: path, query: querystring.parse(queryString)};\n\n  if (path === '/') {\n    path = '';\n  }\n  var result = searchRouteTree(routeTree, path);\n  var callbacks = result[0];\n  req.params = result[1];\n  if (callbacks !== null) {\n    if (Array.isArray(callbacks)) {\n      for (var i = 0, len = callbacks.length; i < len; ++i) { // 不考虑异步操作\n        callbacks[i].call(this, req);\n      }\n    } else {\n      throw new TypeError(`Expected Array, got ${ typeof callbacks }`);\n    }\n  } else if (this.options.notFound) {\n    this.options.notFound(req);\n  }\n  return this;\n};\n\n/**\n * 这个方法会改变当前的`url`，从而触发路由（和dispatch类似，但是dispatch不会改动`url`）\n * 这个方法对于hash/hashbang模式没有多大用处，用户可以通过点击<a>标签实现`url`改变而不跳转页面，但是在history模式下，用户无法通过标签改变`url`而不跳转页面\n * 改方法相当于调用一次history.pushState()然后再调用.dispatch()\n * 如果url没有改变，则不\"刷新\"\n *\n * @param {String} path\n * @return this\n */\nproto.setRoute = function(path) {\n  var loc = window.location;\n  var oldURI = loc.pathname + loc.search;\n  Listener.setHashHistory(path);\n  var newURI = loc.pathname + loc.search;\n  if (this.options.mode === 'history' && oldURI !== newURI) {\n    this.dispatch(newURI);\n  }\n  return this;\n};\n\n/**\n * alias: `setRoute`\n */\nproto.redirect = function(path) {\n  return this.setRoute(path);\n};\n\n/**\n * TODO: once\n * 和.on()方法类似，但只会触发一次\n * @param {String|RegExp} path\n * @param {Function|Array} handlers\n * @return this\n */\nproto.once = function(path, handlers) {\n  return this;\n};\n\n/**\n * .off()方法表示不再侦听某个路由，直接将该路由节点的所有callbacks移除\n * @return this\n */\nproto.off = function(path) {\n  if (path !== '' && path[0] === '/') {\n    path = path.slice(1);\n  }\n  var n = findNode(this.routeTree, path);\n  if (n !== null && n.callbacks !== null) {\n    n.callbacks.splice(0, n.callbacks.length);\n  }\n  return this;\n};\n\n/**\n * .reload()\n * reload page: redispatch current path\n * @method\n * @return this\n */\nproto.reload = function() {\n  if (this.options.mode === 'history') {\n    this.dispatch(location.pathname + location.search + location.hash);\n  } else {\n    this.dispatch(location.hash.slice(1));\n  }\n  return this;\n};\n\nproto._callHooks = function() {};\n\n/**\n * 增加一个或多个回调，在每次路由变化（但是路由回调还没执行之前）的时候触发\n */\nproto.beforeEach = function(callbacks) {\n  if (isArray(callbacks)) {\n    this.hooks['beforeEach'] = this.hooks['beforeEach'].concat(callbacks);\n  } else {\n    this.hooks['beforeEach'].push(callbacks);\n  }\n};\n"],"names":["isArray"],"mappings":"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"}